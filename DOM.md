# DOM

## HTML 파싱으로 DOM 생성

브라우저의 요청에 의해 서버가 응답한 HTML 문서는 텍스트 상태이다. 이 html 문서를 시각적으로 렌더링하려면 브라우저가 이해할 수 있는 자료구조, '객체'로 변환하여 메모리에 저장해야 한다.

## 브라우저가 이해할 수 있는 자료구조 Document Object Model

DOM은 HTML 문서를 파싱한 결과물이다.

`DOM은 HTML 문서의 계층적 구조와 정보를 표현하며, 이를 제어할 수 있는 API 즉, 프로퍼티와 메서드를 제공하는 트리 자료구조이다.`

### HTML요소 -> 노드 객체

HTML 요소는 렌더링 엔진에 의해 파싱되어 DOM을 구성하는 `요소 노드 객체`로 변환된다.

## 트리 자료구조

노드들의 계층 구조로 이루어진다. 부모노드-자식노드(형제노드)로 구성되어 계층적 구조를 표현하는 비선형 자료구조이다. 하나의 최상위 노드가 있으며, 이를 root node라 한다. 자식이 없는 최하위 노드는 leaf node(예, 텍스트 노드)라 한다. 이렇게 노드 객체들로 구성된 트리 자료구조를 DOM이라 한다. 노드 객체의 트리로 구성되어 있어서, DOM을 `DOM 트리`라고 부르기도 한다.

## 노드 타입

문서 노드, 요소 노드, 어트리뷰트 노드, 텍스트 노드 등 총 12 개의 노드 타입이 있다.

### 문서 노드

문서 노드는 노드 중에서도 `DOM 트리의 최상위에 존재하는 루트 노드`이다. `Document 객체`를 가리킨다. `HTML 문서 전체를 가리키는 객체로, 전역 객체 window의 document 프로퍼티에 바인딩 되어 있다.`

## 노드 객체의 상속

노드 객체는 자신의 구조와 정보를 제어할 수 있는 DOM API를 사용할 수 있다. 이를 통해 노드 객체는 자신의 부모, 형제, 자식을 탐색할 수 있으며, 자신의 어트리뷰트의 텍스트를 조작할 수도 있다.
<img src="https://velog.velcdn.com/images%2Fhyesom%2Fpost%2Fbd111cf7-d630-47dc-ae9a-09aeb7d227da%2F39-4.png" width="500" height="300" alt="노드 객체 상속 구조(출처 https://velog.io/@hyesom/Deep-Dive-39.-DOM1)">

```
DOM은 HTML 문서의 계층적 구조와 정보를 표현하는 것은 물론 노드 객체의 종류, 즉 노드 타입에 따라 필요한 기능을 프로퍼티와 메서드의 집합인 DOM API로 제공한다. 이 DOM API를 통해 HTML의 구조나 내용 또는 스타일 등을 동적으로 조작할 수 있다.
```

## 요소 노드 취득

id, 태그 이름, class, css 선택자로 노드를 취득할 수 있다.

### HTMLCollection과 NodeList

DOM 컬렉션 객체인 HTMLCollection과 NodeList는 DOM API가 여러 개의 결과값을 반환하기 위한 DOM 컬렉션 객체이다. 모두 유사 배열 객체이며 이터러블이다. 따라서 for...of 문으로 순회할 수 있으며 스프레드 문법을 사용하여 배열로 변환할 수 있다.

```
HTMLCollection
getElementsByTagName, getElementsByClassName 메서드가 반환한다. 노드 객체의 상태를 실시간으로 반영하는 살아있는 DOM 컬렉션 객체이다. 실시간으로 반영되기 때문에 for문으로 순회하며 상태를 변경할 때 주의해야 한다. 의도하지 않은 부작용이 발생할 수 있다. 이 문제는 for 문을 역방향으로 순회하는 방법으로 회피할 수 있다.
NodeList
querySelectorAll 메서드로부터 반환되는 객체이며 none-live 객체이다.
```

```
노드 객체의 상태 변경과 상관없이 안전하게 DOM 컬렉션을 사용하기 위해 HTMLCollection, NodeList 객체를 배열로 변환하여 사용하는 것을 권장한다.
유사 배열이면서 이터러블인 두 객체를 스프레드 문법이나 Arrat.from메서드를 사용하여 배열로 변환할 수 있다.
```
