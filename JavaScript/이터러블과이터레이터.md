23/1/3

# 이터러블과 이터레이터

## 이터레이션 프로토콜

ES6에서 도입. 순회 가능한 데이터 컬렉션을 만들기 위해 약속한 규칙

#### **이터러블 프로토콜**

Symbol.iterator를 프로퍼티 키로 사용한 메서드를 직접 구현하거나, 프로토타입 체인을 통해 상속받은 Symbol.iterator 메서드를 호출하면 이터러블 프로토콜을 준수한 이터레이터가 반환된다. 이러한 규약이 이터러블 프로토콜이며 이를 준수한 객체를 이터러블이라 한다. `이터러블은 for...of문으로 순회할 수 있으며 스프레드 문법과 배열 디스트럭처링 할당의 대상으로 사용할 수 있다.`

#### **이터레이터 프로토콜**

`이터러블의 Symbol.iterator 메서드를 호출`하면 이터레이터 프로토콜을 준수한 `이터레이터를 반환한다.` `이터레이터는 next 메서드를 소유하며 next 메서드를 호출하면 이터러블을 순회하며 value와 done 프로퍼티를 갖는 이터레이터 리절트 객체를 반환한다.` 이러한 규약을 이터레이터 프로토콜이라 하며, 이터레이터 프로토콜을 준수한 객체를 이터레이터라 한다. `이터레이터는 이터러블의 요소를 탐색하기 위한 포인터 역할을 한다.`

## 이터러블 / 이터레이터

- 이터러블: 이터레이터를 리턴하는 `[Symbol.iterator] ` 메서드를 가진 값
- 이터레이터: {value, done} 객체를 리턴하는 `next` 메서드를 가진 값

## 사용자 정의 이터러블

이터레이션 프로토콜을 준수하지 않는 일반 객체도 이터레이션 프로토콜을 준수하도록 구현하면 사용자 정의 이터러블이 된다.

## 빌트인 이터러블

- Array
- String
- Map
- Set
- TypedArray
- arguments \*
- DOM 컬렉션(NodeList, HTMLCollection) \*

## 이터러블과 유사배열 객체

유사배열 객체는 length 프로퍼티를 갖기 때문에 for 문으로 순회할 수 있고, 인덱스를 나타내는 순자 형식의 키를 프로퍼티 키로 가지므로 마치 배열처럼 인덱스로 프로퍼티 값에 접근할 수 있다. `유사배열 객체는 이터러블이 아닌 일반 객체이다. 유사배열 객체에는 Symbol.iterator 메서드가 없기 때문에 for ... of 문으로 순회할 수 없다.` ` 단, arguments, NodeList, HTMLCollection은 유사배열이면서 이터러블이다(ES6).`

## for ... of 문

내부적으로 이터레이터의 next 메서드를 호출하여 이터러블을 순회하며 next 메서드가 반환한 이터레이터의 리절트 객체의 done 프로퍼티 값이 false이면 이터러블의 순회를 계속하고, true이면 이터러블의 순회를 중단한다.

모던 자바스크립트 딥 다이브
