# SSG 와 SSR

next.js는 서버에서 pre-rendering. 이후 페이지 생성 방법에 따라 SSR, SSG로 나뉨

- 동적으로 페이지 생성: SSR(Server Side Rendering)
- 정적으로 페이지 생성: SSG(Static Site Generation)
  </br>

## SSG

빌드 시 pages 폴더 기준으로 static한 파일을 만들어둔다.
</br>
해당 페이지를 요청하면 미리 가지고 있던 정적 파일을 반환한다. 때문에 CSR 보다 빠르다. 실시간으로 정보가 변하지 않는, 정적인 정보들을 각 요청에 대해 동일하게 반환해야하는 경우에 주로 사용한다. 예를 들어 블로그 글, 상품 정보 같은 경우.

`개발 모드에서는 SSG로 작성해도 요청마다 페이지가 재생성된다.`

</br>

## getStaticProps

SSG 방식에서 사용
</br>
클라이언트가 아닌 서버에서만 실행되는 함수로, 빌드 시 한 번만 호출 된다. 빌드 프로세스 중에만 실행되어 클라이언트와 상관 없다.
특정 데이터와 SSG를 해야하는 경우에 getStaticProps 함수를 비동기로 정의하여 사용할 수 있음.
pages 컴포넌트 파일에서만 쓸 수 있다.
컴포넌트 함수 호출 전에 이 함수 먼저 호출된다. 컴포넌트에서 사용하는 props를 준비하는 역할을 한다. 필요한 데이터가 포함된 상태에서 컴포넌트를 렌더링할 수 있다.
항상 props 키를 가지고 있는 객체를 반환해야 한다. 이 props를 컴포넌트에서 사용하는 것.

### revalidate

증분 정적 생성 기능. getStaticProps으로부터 반환되는 객체에 추가하여 사용하는 property. 새로운 데이터를 받아와야 하는 경우, 설정한 주기에 따라 업데이트 한다. `revalidate: 3600`이면 1시간에 한 번씩 regenerate 한다.

## getStaticPaths

getStatisProps 를 사용할 때 필요한 함수.모든 동적 세그먼트 값을 객체로 변환함. fallback, path 등의 키 값을 갖는다.

`getStaticPaths가 필요한 이유`
getStaticProps를 사용하면 빌드 시 페이지가 사전 생성된다. 방문 시 생성되는 것이 아니라, 빌드 될 때 생성되기 때문에 id 값을 주소로 사용한다면 모든 id 값의 페이지를 사전생성한다. getStaticPath는 어떤 동적 매개변수에 대해 페이지를 사전 생성하는지 알려주는 역할.

### fallback

특정 params 키 값에 대해 일부 페이지만 사전생성함. 사용자의 방문이 잦은 페이지는 사전생성, 그렇지 않은 페이지는 요청되었을 때 동적으로 사전생성할 수 있다.

`true와 blocking`
입력 요청에 따라 nextJS가 동적으로 해당 params에 대한 페이지를 서버에 사전생성함.</br>
미리 지정한 경로 목록이 완전하지 않음을 뜻한다. 새로운 페이지가 만들어지는 경우. 없는 페이지 요청 시 페이지를 생성해 캐싱해둔다. 필요할 때 사전 생성하는 개념.

- true: 요청 시 즉시 빈 페이지를 반환하고 콘텐츠가 동적으로 생성되고 나면 띄운다. 아직 데이터가 없는 경우를 처리해야한다.
- blocking: 페이지가 사전 생성할 때까지 사용자가 볼 수 없고, 모두 사전 생성 된 후에 완성된 페이지를 띄운다.
- false: 지원되는 모든 path를 미리 정의했을 때(하드코딩)(정의되지 않은 페이지 -> 404)

## context

getStaticProps, getServerSidProps의 매개변수로 사용할 수 있다.
!! 잘모르겠음 !!
